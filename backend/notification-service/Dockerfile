# Ã‰tape 1 : image Java (tu peux passer Ã  17-jre-alpine pour plus lÃ©ger)
FROM eclipse-temurin:17-jdk-alpine

# Ã‰tape 2 : dossier de travail
WORKDIR /app

# Ã‰tape 3 : copier le JAR
COPY target/notification-service-0.0.1-SNAPSHOT.jar app.jar

# ðŸ”’ Durcissement : crÃ©er un user non-root + permissions minimales
RUN addgroup -S app && adduser -S -G app app \
 && chown -R app:app /app \
 && chmod 0444 /app/app.jar

# Basculer en utilisateur non-root
USER app

# Ã‰tape 4 : exposer le port 8080 (Spring Boot)
EXPOSE 8080

# Ã‰tape 5 : lancer l'application
ENTRYPOINT ["sh","-c","java $JAVA_OPTS -jar app.jar"]

